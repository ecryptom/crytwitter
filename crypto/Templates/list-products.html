{% extends 'base.html' %}
{% load static %}


{% block header %}
    <title>ارز توییتر</title>
    <script src='https://kit.fontawesome.com/a076d05399.js'></script>
    <link rel="stylesheet" href="{% static 'css/list-products.min.css' %}"/>

{% endblock header %}


{% block page %}

    {% for group in product_groups %}
    {% if group.product_set.all %}
        <section class="list-products" id="{{group.name}}">
            <div class="container">
                <h2 class="list-products-heading-two">{{group.name}}</h2>
                <div class="list-products-boxes-wrapper">
                    <div class="row list-products-boxes-wrapper-row">

                    {% for product in group.product_set.all %}
                        <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4">
                            <div class="list-products-boxes">
                                <a href="{% url 'product' product.id %}" class="list-products-boxes-link">
                                    <img src="{{product.image1.url}}" class="list-products-boxes-image" />
                                </a>
                                <h3 class="list-products-boxes-heading-three">
                                    <a href="{% url 'product' product.id %}" class="list-products-boxes-link">
                                        {{product.name}}
                                    </a>
                                </h3>      
                                <div class="list-products-boxes-price">
                                    <span class="list-products-boxes-price-value withcommas">{{product.net_price}}</span>
                                    <span class="list-products-boxes-price-unit">تومان</span>
                                </div>
                                <div class="list-products-boxes-status">
                                    <span class="list-products-boxes-status-title">وضعیت : </span>
                                    {% if product.is_available %}
                                        <span class="list-products-boxes-status-available">موجود</span>
                                    {% else %}
                                        <span class="list-products-boxes-status-unavailable">ناموجود</span>
                                    {% endif %}
                                </div>
                                {% if product.is_available %}
                                    <div class="list-products-boxes-add-to-cart">
                                        <a href="{% url 'add_product_to_cart' product.id %}" class="list-products-boxes-add-to-cart-link">
                                        افزودن به سبد خرید
                                        </a>
                                    </div>
                                {% endif %}
                                
                            </div>
                        </div>
                    {% endfor %}

                    </div>
                </div>
            </div>
        </section>
    {% endif %}
    {% endfor %}
{% endblock page %}
    


{% block scripts %}
    <script src="{% static 'js/typed.min.js' %}"></script>

<!---------------------split number with camma---------------------->
<script>
    function numberWithCommas(x) {
        var parts = x.toString().split(".");
        parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        return parts.join(".");
    }
    prices = document.getElementsByClassName('withcommas');
    for(var i=0; i< prices.length; i++){
        prices[i].innerText = numberWithCommas(parseInt(prices[i].innerText));
    }

</script>
{% endblock scripts %}

