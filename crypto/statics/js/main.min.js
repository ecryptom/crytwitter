//Pre Loader
window.addEventListener('load', function () {
  let preloader = document.querySelector(".preloader");
  preloader.classList.add('hide-preloader');
  document.documentElement.classList.remove("not-show-scroll-bar");
});


//Smooth Scroll
$("a.scroll").on('click', function (event) {
  if (this.hash !== "") {
    event.preventDefault();
    let hash = this.hash;
    $('html, body').animate({
      scrollTop: $(hash).offset().top - 150
    }, 800);
  }
});
//Sticky Menu
window.addEventListener("scroll", sticyMenu);

function sticyMenu() {
  let navbar = document.getElementById("header");
  let sticky = getComputedStyle(navbar,"height");
  let top = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
  if (top > sticky) {
    navbar.classList.add("header-sticky");
  } else {
    navbar.classList.remove("header-sticky");
  }
}

//Responsive Menu
let openNavigation = document.getElementById("openNav");
let closeNavigation = document.getElementById("closeNav");
let overlay = document.getElementById("overlay");
openNavigation.addEventListener("click", openNav);
closeNavigation.addEventListener("click", closeNav);
overlay.addEventListener("click", closeNav);
window.addEventListener("resize", function () {
  if (window.innerWidth >= 1200) {
    closeNav();
  }
})

function openNav() {
  document.getElementById("responsiveMenu").style.right = "0";
  overlay.classList.add("responsive-menu-overlay-active");
  document.documentElement.classList.add("not-show-scroll-bar");
}

function closeNav() {
  document.getElementById("responsiveMenu").style.right = "-250px";
  overlay.classList.remove("responsive-menu-overlay-active");
  document.documentElement.classList.remove("not-show-scroll-bar");
}

//Sub Menu Collpase
let subMenuLink = document.querySelectorAll(".responsive-submenu-content .responsive-menu-content-link");
subMenuLink.forEach(element => {
  element.addEventListener("click", function () {
    var parent = this.parentElement;
    var subMenuList = parent.querySelector(".responsive-submenu-content-list");
    if (getComputedStyle(subMenuList).height == "0px") {
      subMenuList.style.height = subMenuList.scrollHeight + "px";
      this.classList.add("responsive-menu-content-link-open");
    } else {
      subMenuList.style.height = "0";
      this.classList.remove("responsive-menu-content-link-open");
    }
  });
});


//Accoun Collapse
let collapse = document.getElementById("account-collapse");
let content = document.getElementById("account-content");
let collapseButton = document.getElementById("account-button");
if (collapseButton != null) {
  collapseButton.addEventListener("blur", function () {
    setTimeout(function () {
      content.style.maxHeight = null;
      content.style.border = "none";
    }, 500)
  });
  collapseButton.addEventListener("click", function () {
    if (content.style.maxHeight) {
      content.style.maxHeight = null;
      content.style.border = "none";
    } else {
      content.style.padding = "padding: 5px 18px";
      content.style.maxHeight = content.scrollHeight + "px";
      content.style.border = "1px solid #efefef";
    }
  });
}